<!doctype html><html lang=zh class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.83.1"><link rel=canonical type=text/html href=/web/zh/docs/user-guide/business-console/monitor-alert/><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/web/favicons/favicon.ico><link rel=apple-touch-icon href=/web/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/web/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/web/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/web/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/web/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/web/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/web/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/web/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/web/favicons/android-192x192.png sizes=192x192><title>监控与告警 | Tkestack</title><meta name=description content="生产级别多集群管理系统"><meta property="og:title" content="监控与告警"><meta property="og:description" content="监控与告警
"><meta property="og:type" content="website"><meta property="og:url" content="/web/zh/docs/user-guide/business-console/monitor-alert/"><meta property="og:site_name" content="Tkestack"><meta itemprop=name content="监控与告警"><meta itemprop=description content="监控与告警
"><meta name=twitter:card content="summary"><meta name=twitter:title content="监控与告警"><meta name=twitter:description content="监控与告警
"><link rel=preload href=/web/scss/main.min.f3f5e11928ea652eef8f11ab959efa477bbd1a85923ff5e0245c83fe74bd312a.css as=style><link href=/web/scss/main.min.f3f5e11928ea652eef8f11ab959efa477bbd1a85923ff5e0245c83fe74bd312a.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/web/zh/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Tkestack</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/web/zh/docs/><span>Docs</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/web/zh/blog/><span>Blog</span></a></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文 Chinese</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/web/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/web/zh/docs/user-guide/business-console/monitor-alert/>返回本页常规视图</a>.</p></div><h1 class=title>监控与告警</h1><div class=lead>监控与告警</div><ul><li>1: <a href=#pg-79be2d16b5d7949b81dad31c17ccfb47>设置告警</a></li><li>2: <a href=#pg-845ad2011e5c3014b6adbbdc05f6c385>通知设置</a></li></ul><div class=content><h1 id=监控与告警>监控与告警</h1></div></div><div class=td-content><h1 id=pg-79be2d16b5d7949b81dad31c17ccfb47>1 - 设置告警</h1><div class=lead>设置告警</div><h2 id=概念>概念</h2><p><strong>这里用户配置平台告警。</strong></p><h2 id=前提条件>前提条件</h2><blockquote><ul><li>需要设置告警的命名空间所在的集群，应该先在<a href=../../../platform-console/addon-mgmt/>【扩展组件】</a>安装<strong>Prometheus组件</strong></li></ul></blockquote><h2 id=操作步骤>操作步骤</h2><h3 id=新建告警设置>新建告警设置</h3><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择【监控&告警】-> 【告警设置】，查看“告警设置”列表。</li><li>选择相应【项目】和【namespace】，点击【新建】按钮。如下图所示：</li></ul><p><img src=../../../../../images/%E6%96%B0%E5%BB%BA%E5%91%8A%E8%AD%A6.png alt=&#x65B0;&#x5EFA;&#x544A;&#x8B66;></p><ul><li>在“新建策略”页面填写告警策略信息。如下图所示：</li></ul><p><img src=../../../../../images/%E6%96%B0%E5%BB%BA%E5%91%8A%E8%AD%A6%E7%AD%96%E7%95%A5-1.png alt=&#x65B0;&#x5EFA;&#x544A;&#x8B66;&#x7B56;&#x7565;></p><ul><li><strong>告警策略名称：</strong> 输入告警策略名称，最长60字符</li><li><strong>策略类型：</strong> 选择告警策略应用类型<ul><li><strong>集群：</strong> 集群监控告警</li><li><strong>Pod：</strong> Pod 监控告警<ul><li><strong>告警对象：</strong> 选择Pod相关的告警对象，支持对namespace下不同对deployment、stateful和daemonset 进行监控报警<ul><li><strong>按工作负载选择：</strong> 选择namespace下的某个工作负载</li><li><strong>全部选择：</strong> 不区分namespace，全部监控</li></ul></li></ul></li><li><strong>节点：</strong> 节点监控告警</li></ul></li><li><strong>统计周期：</strong> 选择数据采集周期，支持1、2、3、4、5分钟</li><li><strong>指标：</strong> 选择告警指标，支持对监测值与指标值进行【大于/小于】比较，选择结果持续周期。如下图：</li></ul><p><img src=../../../../../images/%E6%8C%87%E6%A0%87%E8%AE%BE%E7%BD%AE.png alt=&#x6307;&#x6807;&#x8BBE;&#x7F6E;></p><ul><li><strong>接收组：</strong> 选择接收组，当出现满足条件当报警信息时，向组内人员发送消息。<strong>接收组需要先在</strong> <a href=../alerts#%E9%80%9A%E7%9F%A5%E8%AE%BE%E7%BD%AE><strong>通知设置</strong></a> <strong>创建</strong></li><li><strong>通知方式：</strong> 选择通知渠道和消息模版。<strong>通知渠道 和 消息模版需要先在</strong> <a href=../alerts#%E9%80%9A%E7%9F%A5%E8%AE%BE%E7%BD%AE><strong>通知设置</strong></a> <strong>创建</strong><ul><li><strong>添加通知方式</strong> 如需要添加多种通知方式，点击该按钮。<ol><li>单击【提交】按钮。</li></ol></li></ul></li></ul><h3 id=复制告警设置>复制告警设置</h3><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择 【监控&告警】->【告警设置】，查看告警设置列表。</li><li>选择相应【项目】和【namespace】，点击“告警设置”列表最右侧的【复制】按钮。如下图所示：</li></ul><p><img src=../../../../../images/%E5%91%8A%E8%AD%A6%E5%A4%8D%E5%88%B6%E6%8C%89%E9%92%AE-1.png alt=&#x544A;&#x8B66;&#x590D;&#x5236;&#x6309;&#x94AE;></p><ul><li><p>在复制策略页面，编辑告警策略信息。</p></li><li><p>单击【提交】按钮。</p><p><strong>编辑告警设置</strong></p></li><li><p>登录 TKEStack。</p></li><li><p>切换至 【业务管理】控制台，选择 【监控&告警】->【告警设置】，查看告警设置列表。</p></li><li><p>选择相应【项目】和【namespace】，点击【告警名称】。如下图所示：</p></li></ul><p><img src=../../../../../images/%E5%91%8A%E8%AD%A6%E5%90%8D%E7%A7%B0-1.png alt=&#x544A;&#x8B66;&#x540D;&#x79F0;></p><ul><li>在“告警策略详情”页面，单击【基本信息】右侧的【编辑】按钮。如下图所示：</li></ul><p><img src=../../../../../images/%E5%91%8A%E8%AD%A6%E7%BC%96%E8%BE%91-1.png alt=&#x544A;&#x8B66;&#x7F16;&#x8F91;></p><ul><li><p>在更新策略页面，编辑策略信息。</p></li><li><p>单击【提交】按钮。</p><p><strong>删除告警设置</strong></p></li><li><p>登录 TKEStack。</p></li><li><p>切换至 【业务管理】控制台，选择 【监控&告警】->【告警设置】，查看“告警设置”列表。</p></li><li><p>选择相应【项目】和【namespace】，点击列表最右侧的【删除】按钮。如下图所示：</p></li></ul><p><img src=../../../../../images/%E5%91%8A%E8%AD%A6%E5%88%A0%E9%99%A4-1.png alt=&#x544A;&#x8B66;&#x5220;&#x9664;></p><ul><li>在弹出的删除告警窗口，单击【确定】按钮。</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-845ad2011e5c3014b6adbbdc05f6c385>2 - 通知设置</h1><div class=lead>通知设置</div><h2 id=概念>概念</h2><p><strong>这里用户配置平台通知。</strong></p><h2 id=操作步骤>操作步骤</h2><p>这部分和【平台管理】控制台下【监控&告警】下的【通知设置】完全一致。故这里使用【平台管理】控制台下的截图。</p><h3 id=通知渠道>通知渠道</h3><h4 id=新建通知渠道>新建通知渠道</h4><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择 【监控&告警】->【通知设置】->【通知渠道】，查看“通知渠道”列表。</li><li>点击【新建】按钮。如下图所示：</li></ul><p><img src=../../../../../images/xin-jian-tong-zhi-qu-dao-an-niu-%20%283%29.png alt=&#x65B0;&#x5EFA;&#x901A;&#x77E5;&#x6E20;&#x9053;&#x6309;&#x94AE;></p><ul><li>在“新建通知渠道”页面填写渠道信息。如下图所示：</li></ul><p><img src=../../../../../images/%E6%96%B0%E5%BB%BA%E9%80%9A%E7%9F%A5%E6%B8%A0%E9%81%93%20%281%29.png alt=&#x65B0;&#x5EFA;&#x901A;&#x77E5;&#x6E20;&#x9053;></p><ul><li><strong>名称：</strong> 填写渠道名称</li><li><strong>渠道：</strong> 选择渠道类型，输入渠道信息</li><li><strong>邮件：</strong> 邮件类型<ul><li><strong>email：</strong> 邮件发送放地址</li><li><strong>password：</strong> 邮件发送方密码</li><li><strong>smtpHost：</strong> smtp IP地址</li><li><strong>smtpPort：</strong> smtp端口</li><li><strong>tls：</strong> 是否tls加密</li></ul></li><li><strong>短信：</strong> 短信方式<ul><li><strong>appKey：</strong> 短信发送方的appKey</li><li><strong>sdkAppID：</strong> sdkAppID</li><li><strong>extend：</strong> extend 信息</li></ul></li><li><strong>微信公众号：</strong> 微信公众号方式<ul><li><strong>appID：</strong> 微信公众号appID</li><li><strong>appSecret：</strong> 微信公众号app密钥</li></ul></li><li>单击【保存】按钮。</li></ul><h4 id=编辑通知渠道>编辑通知渠道</h4><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择 【监控&告警】->【通知设置】->【通知渠道】，查看“通知渠道”列表。</li><li>单击渠道名称。如下图所示：</li></ul><p><img src=../../../../../images/qu-dao-ming-cheng-%20%281%29%20%282%29.png alt=&#x6E20;&#x9053;&#x540D;&#x79F0;></p><ul><li>在“基本信息”页面，单击【基本信息】右侧的【编辑】按钮。如下图所示：</li></ul><p><img src=../../../../../images/%E6%B8%A0%E9%81%93%E7%BC%96%E8%BE%91%E6%8C%89%E9%92%AE%20%282%29%20%281%29.png alt=&#x6E20;&#x9053;&#x7F16;&#x8F91;&#x6309;&#x94AE;></p><ul><li>在“更新渠道通知”页面，编辑渠道信息。</li><li>单击【保存】按钮。</li></ul><h4 id=删除通知渠道>删除通知渠道</h4><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择 【监控&告警】->【通知设置】->【通知渠道】，查看“通知渠道”列表。</li><li>选择要删除的渠道，点击【删除】按钮。如下图所示：</li></ul><p><img src=../../../../../images/%E6%B8%A0%E9%81%93%E7%BC%96%E8%BE%91%E6%8C%89%E9%92%AE%20%282%29%20%286%29.png alt=&#x5220;&#x9664;&#x6E20;&#x9053;></p><ul><li>单击删除窗口的【确定】按钮。</li></ul><h3 id=通知模板>通知模板</h3><h4 id=新建通知模版>新建通知模版</h4><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择 【监控&告警】->【通知设置】->【通知模板】，查看“通知模板”列表。</li><li>点击【新建】按钮。如下图所示：</li></ul><p><img src=../../../../../images/xin-jian-tong-zhi-mo-ban-%20%281%29.png alt=&#x65B0;&#x5EFA;&#x901A;&#x77E5;&#x6A21;&#x7248;></p><ul><li>在“新建通知模版”页面填写模版信息。如下图所示：</li></ul><p><img src=../../../../../images/%E9%80%9A%E7%9F%A5%E6%A8%A1%E7%89%88.png alt=&#x901A;&#x77E5;&#x6A21;&#x7248;></p><ul><li><strong>名称：</strong> 模版名称</li><li><strong>渠道：</strong> 选择已创建的渠道</li><li><strong>body：</strong> 填写消息body体</li><li><strong>header：</strong> 填写消息标题</li><li>单击【保存】按钮。</li></ul><h4 id=编辑通知模版>编辑通知模版</h4><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择 【监控&告警】->【通知设置】->【通知模板】，查看“通知模板”列表。</li><li>单击模版名称。如下图所示：</li></ul><p><img src=../../../../../images/%E6%A8%A1%E7%89%88%E5%90%8D%E7%A7%B0%20%282%29.png alt=&#x6A21;&#x7248;&#x540D;&#x79F0;></p><ul><li>在基本信息页面，单击【基本信息】右侧的【编辑】按钮。如下图所示：</li></ul><p><img src=../../../../../images/%E6%A8%A1%E7%89%88%E7%BC%96%E8%BE%91%E6%8C%89%E9%92%AE%20%281%29%20%281%29.png alt=&#x6A21;&#x7248;&#x7F16;&#x8F91;&#x6309;&#x94AE;></p><ul><li>在“更新通知模版”页面，编辑模版信息。</li><li>单击【保存】按钮。</li></ul><h4 id=删除通知模版>删除通知模版</h4><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择 【监控&告警】->【通知设置】->【通知模板】，查看"通知模板"列表。</li><li>选择要删除的模版，点击【删除】按钮。如下图所示：</li></ul><p><img src=../../../../../images/%E5%88%A0%E9%99%A4%E6%A8%A1%E7%89%88%20%281%29.png alt=&#x5220;&#x9664;&#x6A21;&#x7248;></p><ul><li>单击删除窗口的【确定】按钮。</li></ul><h3 id=接收人>接收人</h3><h4 id=新建接收人>新建接收人</h4><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择 【监控&告警】->【通知设置】->【接收人】，查看"接收人"列表。</li><li>点击【新建】按钮。如下图所示：</li></ul><p><img src=../../../../../images/xin-jian-jie-shou-ren-%20%281%29.png alt=&#x65B0;&#x5EFA;&#x63A5;&#x6536;&#x4EBA;></p><ul><li>在“新建接收人”页面填写模版信息。如下图所示：</li></ul><p><img src=../../../../../images/%E6%8E%A5%E6%94%B6%E4%BA%BA%20%281%29%20%281%29.png alt=&#x63A5;&#x6536;&#x4EBA;></p><ul><li><strong>显示名称：</strong> 接收人显示名称</li><li><strong>用户名：</strong> 接收人用户名</li><li><strong>移动电话：</strong> 手机号</li><li><strong>电子邮件：</strong> 接收人邮箱</li><li><strong>微信OpenID：</strong> 接收人微信ID</li><li>单击【保存】按钮。</li></ul><h4 id=编辑接收人信息>编辑接收人信息</h4><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择 【监控&告警】->【通知设置】->【接收人】，查看“接收人”列表。</li><li>单击接收人名称。如下图所示：</li></ul><p><img src=../../../../../images/jie-shou-ren-ming-cheng-%20%281%29.png alt=&#x63A5;&#x6536;&#x4EBA;&#x540D;&#x79F0;></p><ul><li>在“基本信息”页面，单击【基本信息】右侧的【编辑】按钮。如下图所示：</li></ul><p><img src=../../../../../images/%E6%8E%A5%E6%94%B6%E4%BA%BA%E7%BC%96%E8%BE%91%E6%8C%89%E9%92%AE.png alt=&#x63A5;&#x6536;&#x4EBA;&#x7F16;&#x8F91;&#x6309;&#x94AE;></p><ul><li>在“更新接收人”页面，编辑接收人信息。</li><li>单击【保存】按钮。</li></ul><h4 id=删除接收人>删除接收人</h4><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择 【监控&告警】->【通知设置】->【接收人】，查看“接收人”列表。</li><li>选择要删除的接收人，点击【删除】按钮。如下图所示：</li></ul><p><img src=../../../../../images/image%20%28135%29.png alt></p><ul><li>单击删除窗口的【确定】按钮。</li></ul><h3 id=接收组>接收组</h3><h4 id=新建接收组>新建接收组</h4><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择 【监控&告警】->【通知设置】->【接收组】，查看“接收组”列表。</li><li>点击【新建】按钮。如下图所示：</li></ul><p><img src=../../../../../images/%E6%96%B0%E5%BB%BA%E6%8E%A5%E6%94%B6%E7%BB%84%20%282%29%20%285%29.png alt=&#x65B0;&#x5EFA;&#x63A5;&#x6536;&#x7EC4;></p><ul><li>在“新建接收组”页面填写模版信息。如下图所示：</li></ul><p><img src=../../../../../images/%E6%96%B0%E5%BB%BA%E6%8E%A5%E6%94%B6%E7%BB%84%20%282%29.png alt=&#x63A5;&#x6536;&#x7EC4;></p><ul><li><strong>名称：</strong> 接收组显示名称</li><li><strong>接收组：</strong> 从列表里选择接收人。如没有想要的接收人，请在<a href=../notifier#%E6%8E%A5%E6%94%B6%E4%BA%BA>接收人</a>里创建。</li><li>单击【保存】按钮。</li></ul><h4 id=编辑接收组信息>编辑接收组信息</h4><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择 【监控&告警】->【通知设置】->【接收组】，查看“接收组”列表。</li><li>单击接收组名称。如下图所示：</li></ul><p><img src=../../../../../images/jie-shou-zu-ming-cheng-%20%281%29.png alt=&#x63A5;&#x6536;&#x7EC4;&#x540D;&#x79F0;></p><ul><li>在“基本信息”页面，单击【基本信息】右侧的【编辑】按钮。如下图所示：</li></ul><p><img src=../../../../../images/%E6%8E%A5%E6%94%B6%E7%BB%84%E7%BC%96%E8%BE%91%E6%8C%89%E9%92%AE%20%281%29.png alt=&#x63A5;&#x6536;&#x7EC4;&#x7F16;&#x8F91;&#x6309;&#x94AE;></p><ul><li>在“更新接收组”页面，编辑接收组信息。</li><li>单击【保存】按钮。</li></ul><h4 id=删除接收组>删除接收组</h4><ul><li>登录 TKEStack。</li><li>切换至【业务管理】控制台，选择 【监控&告警】->【通知设置】->【接收组】，查看“接收组”列表。</li><li>选择要删除的接收组，点击【删除】按钮。如下图所示：</li></ul><p><img src=../../../../../images/%E5%88%A0%E9%99%A4%E6%8E%A5%E6%94%B6%E7%BB%84%20%281%29%20%281%29.png alt=&#x5220;&#x9664;&#x63A5;&#x6536;&#x7EC4;></p><ul><li>单击删除窗口的【确定】按钮。</li></ul></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/tkestack/tke aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 The TKEStack Authors All Rights Reserved</small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/web/js/main.min.1911ee3ae98d7d6df3807cd00d8e31ae7d1c08ee0f0bb587529b0483da4e5464.js integrity="sha256-GRHuOumNfW3zgHzQDY4xrn0cCO4PC7WHUpsEg9pOVGQ=" crossorigin=anonymous></script></body></html>