<!doctype html><html lang=zh class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.83.1"><link rel=canonical type=text/html href=/web/zh/docs/release/><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/web/favicons/favicon.ico><link rel=apple-touch-icon href=/web/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/web/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/web/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/web/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/web/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/web/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/web/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/web/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/web/favicons/android-192x192.png sizes=192x192><title>Release Notes | Tkestack</title><meta name=description content="生产级别多集群管理系统"><meta property="og:title" content="Release Notes"><meta property="og:description" content="Release Notes
"><meta property="og:type" content="website"><meta property="og:url" content="/web/zh/docs/release/"><meta property="og:site_name" content="Tkestack"><meta itemprop=name content="Release Notes"><meta itemprop=description content="Release Notes
"><meta name=twitter:card content="summary"><meta name=twitter:title content="Release Notes"><meta name=twitter:description content="Release Notes
"><link rel=preload href=/web/scss/main.min.f3f5e11928ea652eef8f11ab959efa477bbd1a85923ff5e0245c83fe74bd312a.css as=style><link href=/web/scss/main.min.f3f5e11928ea652eef8f11ab959efa477bbd1a85923ff5e0245c83fe74bd312a.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/web/zh/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Tkestack</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/web/zh/docs/><span>Docs</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/web/zh/blog/><span>Blog</span></a></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文 Chinese</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/web/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/web/zh/docs/release/>返回本页常规视图</a>.</p></div><h1 class=title>Release Notes</h1><div class=lead>Release Notes</div><ul><li>1: <a href=#pg-b87aa9ec5ade71d423718f6df98b86fc>1.5</a></li><li>2: <a href=#pg-f22e2aaf3063619abbd08ebf0f29b319>1.4</a></li><li>3: <a href=#pg-ce88226d3c0cc22aa882b44e13efcae4>1.3</a></li></ul><div class=content><p><a href=https://github.com/tkestack/tke/tree/master/CHANGELOG>ChangeLogs</a></p></div></div><div class=td-content><h1 id=pg-b87aa9ec5ade71d423718f6df98b86fc>1 - 1.5</h1><div class=lead>1.5</div><h2 id=tkestack-release-v150>TKEStack Release v1.5.0</h2><p>TKEStack 1.5.0 版本，相较于上一版本（v1.4.x），增加了集群升级，master节点扩容，导入外部应用商店功能等，同时对监控组件，工作负载等页面也进行了优化，满足海量 pod 工作负载的分页和查询。</p><h3 id=installation>Installation</h3><p>参考 <a href=https://github.com/tkestack/tke#quickstart>QuickStart</a> 指引快速安装部署TKEStack平台。</p><p>AMD64版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>arch=amd64 version=v1.5.0 &amp;&amp; wget https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-linux-$arch-$version.run{,.sha256} &amp;&amp; sha256sum --check --status tke-installer-linux-$arch-$version.run.sha256 &amp;&amp; chmod +x tke-installer-linux-$arch-$version.run &amp;&amp; ./tke-installer-linux-$arch-$version.run
</code></pre></div><p>ARM64版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>arch=arm64 version=v1.5.0 &amp;&amp; wget https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-linux-$arch-$version.run{,.sha256} &amp;&amp; sha256sum --check --status tke-installer-linux-$arch-$version.run.sha256 &amp;&amp; chmod +x tke-installer-linux-$arch-$version.run &amp;&amp; ./tke-installer-linux-$arch-$version.run
</code></pre></div><h3 id=changelog-since-v140>Changelog since v1.4.0</h3><p>完整的修改日志请查阅 <a href=https://github.com/tkestack/tke/blob/master/CHANGELOG/CHANGELOG-1.4.md>changelog</a></p><p>A complete changelog for the release notes please check at <a href=https://github.com/tkestack/tke/blob/master/CHANGELOG/CHANGELOG-1.4.md>changelog</a></p><h3 id=major-feature-and-enhancements>Major Feature and Enhancements</h3><p>集群功能</p><ul><li>提供了集群升级的功能，支持将独立集群或global集群的K8S 版本 vx.y.z 升级，支持次要版本升级(y+1)，以及补丁版本升级(z)。 提供Auto 自动和Manual 手动升级两种模式，自动模式下TKEStack按顺序滚动升级所有master 节点和worker 节点；手动模式下可单独升级master 节点，单独选择部分或所有 worker 节点进行升级。所有升级过程可观察，并且支持配置节点驱逐和最大不可用pod数，保证升级过程的稳定。</li><li>支持master节点扩容和缩容能力，以满足对性能和高可用的需求。该功能需要集群apiserver地址为高可用 vip或 loadbalance地址，且待添加master节点与原节点在同一网段，操作系统与环境相同。</li><li>支持通过 kubeconfig 文件自动导入集群，优化导入集群操作体验。</li></ul><p>应用商店和镜像仓库</p><ul><li>支持导入外部应用商店，常用helm仓库地址都可快速导入和同步。</li><li>支持根据多用户或业务创建和分配模板仓库。</li><li>同时镜像仓库部分也进行了代码重构，支持对接distribution和harbor作为存储后端。</li></ul><p>前端分页和搜索</p><ul><li>优化workload下的pod管理页面的分页和搜索功能，支持按 pod 名称，IP，状态及自定义label字段查询。</li><li>页面支持修改节点 Taint。</li><li>支持为 TAPP 类型工作负载开启监控。</li></ul><p>其他</p><ul><li>新增了监控组件的配置页面，用户可根据集群运行环境配置合理的监控参数。</li><li>审计，日志和事件等功能支持对接至 ElasticSearch 7.5.1 版本，支持修改 ES 地址，index patern，用户名密码等。</li></ul><h3 id=bugs-fixed>Bugs Fixed</h3><p>自 v1.4.0 以来修复的主要问题</p><ul><li>参见 <a href=https://github.com/tkestack/tke/blob/master/CHANGELOG/CHANGELOG-1.5.md#bug-fixes>Bug Fixes</a></li></ul><h3 id=versions>Versions</h3><h4 id=离线安装包地址>离线安装包地址</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-linux-amd64-v1.5.0.run
</code></pre></div><p>arm64版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-linux-arm64-v1.5.0.run
</code></pre></div><p>Kubernetes 版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>kube-apiserver-amd64:v1.16.9
kube-apiserver-amd64:v1.17.13
kube-apiserver-amd64:v1.18.3
kube-apiserver-arm64:v1.16.9
kube-apiserver-arm64:v1.17.13
kube-apiserver-arm64:v1.18.3
kube-controller-manager-amd64:v1.16.9
kube-controller-manager-amd64:v1.17.13
kube-controller-manager-amd64:v1.18.3
kube-controller-manager-arm64:v1.16.9
kube-controller-manager-arm64:v1.17.13
kube-controller-manager-arm64:v1.18.3
kube-proxy-amd64:v1.16.9
kube-proxy-amd64:v1.17.13
kube-proxy-amd64:v1.18.3
kube-proxy-arm64:v1.16.9
kube-proxy-arm64:v1.17.13
kube-proxy-arm64:v1.18.3
kube-scheduler-amd64:v1.16.9
kube-scheduler-amd64:v1.17.13
kube-scheduler-amd64:v1.18.3
kube-scheduler-arm64:v1.16.9
kube-scheduler-arm64:v1.17.13
kube-scheduler-arm64:v1.18.3
</code></pre></div><p>镜像版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>tke-application-api-amd64:v1.5.0
tke-application-api-arm64:v1.5.0
tke-application-controller-amd64:v1.5.0
tke-application-controller-arm64:v1.5.0
tke-audit-api-amd64:v1.5.0
tke-audit-api-arm64:v1.5.0
tke-auth-api-amd64:v1.5.0
tke-auth-api-arm64:v1.5.0
tke-auth-controller-amd64:v1.5.0
tke-auth-controller-arm64:v1.5.0
tke-business-api-amd64:v1.5.0
tke-business-api-arm64:v1.5.0
tke-business-controller-amd64:v1.5.0
tke-business-controller-arm64:v1.5.0
tke-gateway-amd64:v1.5.0
tke-gateway-arm64:v1.5.0
tke-logagent-api-amd64:v1.5.0
tke-logagent-api-arm64:v1.5.0
tke-logagent-controller-amd64:v1.5.0
tke-logagent-controller-arm64:v1.5.0
tke-monitor-api-amd64:v1.5.0
tke-monitor-api-arm64:v1.5.0
tke-monitor-controller-amd64:v1.5.0
tke-monitor-controller-arm64:v1.5.0
tke-notify-api-amd64:v1.5.0
tke-notify-api-arm64:v1.5.0
tke-notify-controller-amd64:v1.5.0
tke-notify-controller-arm64:v1.5.0
tke-platform-api-amd64:v1.5.0
tke-platform-api-arm64:v1.5.0
tke-platform-controller-amd64:v1.5.0
tke-platform-controller-arm64:v1.5.0
tke-registry-api-amd64:v1.5.0
tke-registry-api-arm64:v1.5.0
tke-registry-controller-amd64:v1.5.0
tke-registry-controller-arm64:v1.5.0
</code></pre></div><p>其他addon镜像版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>addon-resizer-amd64:1.8.11
addon-resizer-arm64:1.8.11
alertmanager:v0.18.0
busybox-amd64:1.31.0
busybox-amd64:1.31.1
busybox-arm64:1.31.0
busybox-arm64:1.31.1
configmap-reload:v0.1
coredns-amd64:1.6.7
coredns-arm64:1.6.7
cron-hpa-controller:v1.0.0
csi-operator:v1.0.2
etcd-amd64:v3.4.7
etcd-arm64:v3.4.7
flannel-amd64:v0.10.0
flannel-arm64:v0.10.0
galaxy-amd64:v1.0.6
galaxy-arm64:v1.0.6
galaxy-ipam-amd64:v1.0.6
galaxy-ipam-arm64:v1.0.6
gpu-manager:v1.0.4
gpu-quota-admission:v1.0.0
helm-api:v1.3
influxdb-amd64:1.7.9
influxdb-arm64:1.7.9
k8s-prometheus-adapter:4c67353
keepalived-amd64:2.0.16-r0
keepalived-arm64:2.0.16-r0
kube-state-metrics:v1.9.5
lbcf-controller:v1.0.0.rc.2
log-agent:v1.1.0
log-collector:v1.1.0
log-file:v1.1.0
metrics-server-amd64:v0.3.6
metrics-server-arm64:v0.3.6
node-exporter:v0.18.1
node-problem-detector:v0.8.2
nvidia-device-plugin:1.0.0-beta4
pause-amd64:3.1
pause-arm64:3.1
prometheus-config-reloader:v0.31.1
prometheus-operator:v0.31.1
prometheus:v2.16.0
prometheusbeat:6.4.1
provider-res-amd64:v1.18.3-2
provider-res-arm64:v1.18.3-2
registry-amd64:2.7.1
registry-arm64:2.7.1
swift:0.9.0
tapp-controller:v1.1.1
tiller:v2.10.0
tke-audit-collector:v1.10.0
tke-event-watcher:v0.1
volume-decorator:v1.0.1
</code></pre></div><h3 id=known-issues>Known Issues</h3><h3 id=upgrades-notes>Upgrades Notes</h3><p>暂不支持自动升级，需要人工升级操作，升级过程保证configmap，workload 配置以及组件镜像的同时升级。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f22e2aaf3063619abbd08ebf0f29b319>2 - 1.4</h1><div class=lead>1.4</div><h2 id=tkestack-release-v140>TKEStack Release v1.4.0</h2><p>TKEStack v1.4.0 版本继续增强平台健壮性和易用性，修复社区和用户发现的问题Issue，升级Tapp应用和Galaxy网络扩展组件版本。 新增 Helm 模板和仓库功能，支持 Helm v3 应用的安装部署。 新增集群概览页面，集中展示多集群资源和负载情况，增加了更多的metrics监控指标，帮助用户更相信准确的评估健康状态。 独立出 HPA 和 CronHPA 自动伸缩页面，允许客户更灵活的自定义弹性伸缩规则。 增强了集群的管理和安全能力，支持为集群独立开启或关闭功能组件，支持使用主机 hostname 作为集群节点名称，加固TKEStack底层基础镜像。</p><h3 id=installation>Installation</h3><p>参考 <a href=https://github.com/tkestack/tke#quickstart>QuickStart</a> 指引快速安装部署TKEStack平台。</p><p>AMD64版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>arch=amd64 version=v1.4.0 &amp;&amp; wget https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-linux-$arch-$version.run{,.sha256} &amp;&amp; sha256sum --check --status tke-installer-linux-$arch-$version.run.sha256 &amp;&amp; chmod +x tke-installer-linux-$arch-$version.run &amp;&amp; ./tke-installer-linux-$arch-$version.run
</code></pre></div><p>ARM64版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>arch=arm64 version=v1.4.0 &amp;&amp; wget https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-linux-$arch-$version.run{,.sha256} &amp;&amp; sha256sum --check --status tke-installer-linux-$arch-$version.run.sha256 &amp;&amp; chmod +x tke-installer-linux-$arch-$version.run &amp;&amp; ./tke-installer-linux-$arch-$version.run
</code></pre></div><h3 id=changelog-since-v131>Changelog since v1.3.1</h3><p>完整的修改日志请查阅 <a href=https://github.com/tkestack/tke/blob/master/CHANGELOG/CHANGELOG-1.4.md>changelog</a></p><p>A complete changelog for the release notes please check at <a href=https://github.com/tkestack/tke/blob/master/CHANGELOG/CHANGELOG-1.4.md>changelog</a></p><h3 id=major-feature-and-enhancements>Major Feature and Enhancements</h3><p>Helm charts仓库和应用中心</p><ul><li>新增 Helm 模板和仓库功能，支持 Helm v3 应用的安装部署。</li></ul><p>集群概览</p><ul><li>新增集群概览页面，集中展示多集群资源和负载情况，增加了更多的metrics监控指标，帮助用户更相信准确的评估健康状态</li></ul><p>HPA 和 CronHPA</p><ul><li>独立出 HPA 和 CronHPA 自动伸缩页面，允许客户更灵活的自定义弹性伸缩规则。</li></ul><p>其他</p><ul><li>增强了集群的管理和安全能力，支持为集群独立开启或关闭功能组件</li><li>支持使用主机 hostname 作为集群节点名称</li><li>加固TKEStack底层基础镜像。</li></ul><h3 id=bugs-fixed>Bugs Fixed</h3><p>自 v1.3.1 以来修复的主要问题</p><ul><li>参见 <a href=https://github.com/tkestack/tke/blob/master/CHANGELOG/CHANGELOG-1.4.md#bug-fixes>Bug Fixes</a></li></ul><h3 id=versions>Versions</h3><h4 id=离线安装包地址>离线安装包地址</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-linux-amd64-v1.4.0.run
</code></pre></div><p>arm64版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-linux-arm64-v1.4.0.run
</code></pre></div><p>Kubernetes 版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>kube-apiserver-amd64:v1.16.9
kube-apiserver-amd64:v1.18.3
kube-apiserver-arm64:v1.16.9
kube-apiserver-arm64:v1.18.3
kube-controller-manager-amd64:v1.16.9
kube-controller-manager-amd64:v1.18.3
kube-controller-manager-arm64:v1.16.9
kube-controller-manager-arm64:v1.18.3
kube-proxy-amd64:v1.16.9
kube-proxy-amd64:v1.18.3
kube-proxy-arm64:v1.16.9
kube-proxy-arm64:v1.18.3
kube-scheduler-amd64:v1.16.9
kube-scheduler-amd64:v1.18.3
kube-scheduler-arm64:v1.16.9
kube-scheduler-arm64:v1.18.3
</code></pre></div><p>镜像版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>tkestack/tke-auth-api-amd64:v1.4.0
tkestack/tke-auth-api-arm64:v1.4.0
tkestack/tke-auth-controller-amd64:v1.4.0
tkestack/tke-auth-controller-arm64:v1.4.0
tkestack/tke-business-api-amd64:v1.4.0
tkestack/tke-business-api-arm64:v1.4.0
tkestack/tke-business-controller-amd64:v1.4.0
tkestack/tke-business-controller-arm64:v1.4.0
tkestack/tke-gateway-amd64:v1.4.0
tkestack/tke-gateway-arm64:v1.4.0
tkestack/tke-logagent-api-amd64:v1.4.0
tkestack/tke-logagent-api-arm64:v1.4.0
tkestack/tke-logagent-controller-amd64:v1.4.0
tkestack/tke-logagent-controller-arm64:v1.4.0
tkestack/tke-monitor-api-amd64:v1.4.0
tkestack/tke-monitor-api-arm64:v1.4.0
tkestack/tke-monitor-controller-amd64:v1.4.0
tkestack/tke-monitor-controller-arm64:v1.4.0
tkestack/tke-notify-api-amd64:v1.4.0
tkestack/tke-notify-api-arm64:v1.4.0
tkestack/tke-notify-controller-amd64:v1.4.0
tkestack/tke-notify-controller-arm64:v1.4.0
tkestack/tke-platform-api-amd64:v1.4.0
tkestack/tke-platform-api-arm64:v1.4.0
tkestack/tke-platform-controller-amd64:v1.4.0
tkestack/tke-platform-controller-arm64:v1.4.0
tkestack/tke-registry-api-amd64:v1.4.0
tkestack/tke-registry-api-arm64:v1.4.0
</code></pre></div><p>其他addon镜像版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>addon-resizer-amd64:1.8.11
addon-resizer-arm64:1.8.11
alertmanager:v0.18.0
busybox-amd64:1.31.0
busybox-amd64:1.31.1
busybox-arm64:1.31.0
busybox-arm64:1.31.1
configmap-reload:v0.1
coredns-amd64:1.6.7
coredns-arm64:1.6.7
cron-hpa-controller:v1.0.0
csi-operator:v1.0.2
etcd-amd64:v3.4.7
etcd-arm64:v3.4.7
flannel-amd64:v0.10.0
flannel-arm64:v0.10.0
galaxy-amd64:v1.0.6
galaxy-arm64:v1.0.6
galaxy-ipam-amd64:v1.0.6
galaxy-ipam-arm64:v1.0.6
gpu-manager:v1.0.4
gpu-quota-admission:v1.0.0
helm-api:v1.3
influxdb-amd64:1.7.9
influxdb-arm64:1.7.9
keepalived-amd64:2.0.16-r0
keepalived-arm64:2.0.16-r0
kube-state-metrics:v1.9.5
lbcf-controller:v1.0.0.rc.2
log-agent:v1.1.0
log-collector:v1.1.0
log-file:v1.1.0
metrics-server-amd64:v0.3.6
metrics-server-arm64:v0.3.6
node-exporter:v0.18.1
node-problem-detector:v0.8.2
nvidia-device-plugin:1.0.0-beta4
pause-amd64:3.1
pause-arm64:3.1
prometheus-config-reloader:v0.31.1
prometheus-operator:v0.31.1
prometheus:v2.16.0
prometheusbeat:6.4.1
provider-res-amd64:v1.18.3-1
provider-res-arm64:v1.18.3-1
registry-amd64:2.7.1
registry-arm64:2.7.1
swift:0.9.0
tapp-controller:v1.1.1
tiller:v2.10.0
tke-audit-collector:v0.3
tke-event-watcher:v0.1
volume-decorator:v1.0.1
</code></pre></div><h3 id=known-issues>Known Issues</h3><h3 id=upgrades-notes>Upgrades Notes</h3><p>暂不支持自动升级，需要人工升级操作，升级过程保证configmap，workload 配置以及组件镜像的同时升级。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ce88226d3c0cc22aa882b44e13efcae4>3 - 1.3</h1><div class=lead>1.3</div><h2 id=tkestack-release-v130>TKEStack Release v1.3.0</h2><p>TKEStack v1.3.0 版本已于本周发布，相较上一版本（v1.2.x）增强了用户权限，业务能力，优化日志、审计及监控告警等功能，支持最新 K8S v1.18.3 及 v1.16.9 版本，同时修复大量影响业务功能和使用体验的bug。</p><p>TKEStack 是腾讯内部几大团队合力打造的开源版本，总结了多年来腾讯在云原生领域的经验和技术积累，吸收了 Gaia 平台、TKE 公有云以及腾讯内部众多容器产品的优点，全新打造的面向私有云业务场景的开源容器平台。</p><p>本次版本重点增强用户权限及业务管理能力，区分平台用户和业务用户，平台用户负责维护平台下集群，节点，业务及运维中心等资源，保障平台的正常运行和资源的可用； 业务用户专注自身业务应用的配置管理和部署发布，通过统一提供的配额、命名空间以及镜像仓库等管理能力，方便用户在多集群场景下编排业务应用。</p><p>本版本还在日志功能上有较大重构和增强，对原有 logcollector 扩展组件进行降级处理，增加了 logagent 日志组件设置页面，用以控制集群的日志采集功能。 支持在工作负载创建时配置日志目录，指定日志输出的数据卷和挂载点；在详情页的日志面板下，支持查看日志文件的内容并能够下载日志文件。 增加了业务管理视图下日志采集页面，支持对命名空间下的工作负载、容器等配置日志采集规则。完备的采集策略将支持用户全程监控记录业务应用运行数据，及时高效地发现和定位问题。</p><p>新增审计功能，记录并保存用户操作记录，并提供独立的页面方便管理员集中查看和搜索审计记录，满足相关机构对平台安全合规的要求。 同时优化大量监控告警等指标参数，并支持多种通知告警渠道帮助管理员第一时间发现平台问题。更多优化请参考 <a href=https://github.com/tkestack/tke/wiki/release-1.3#major-feature-and-enhancements>Major Feature and Enhancements</a></p><h3 id=installation>Installation</h3><p>参考 <a href=https://github.com/tkestack/tke#quickstart>QuickStart</a> 指引快速安装部署TKEStack平台。</p><p>AMD64版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>arch=amd64 version=v1.3.0 &amp;&amp; wget https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-linux-$arch-$version.run{,.sha256} &amp;&amp; sha256sum --check --status tke-installer-linux-$arch-$version.run.sha256 &amp;&amp; chmod +x tke-installer-linux-$arch-$version.run &amp;&amp; ./tke-installer-linux-$arch-$version.run
</code></pre></div><p>ARM64版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>arch=arm64 version=v1.3.0 &amp;&amp; wget https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-linux-$arch-$version.run{,.sha256} &amp;&amp; sha256sum --check --status tke-installer-linux-$arch-$version.run.sha256 &amp;&amp; chmod +x tke-installer-linux-$arch-$version.run &amp;&amp; ./tke-installer-linux-$arch-$version.run
</code></pre></div><h3 id=changelog-since-v124>Changelog since v1.2.4</h3><p>完整的修改日志请查阅 <a href=https://github.com/tkestack/tke/blob/master/CHANGELOG/CHANGELOG-1.3.md>changelog</a></p><p>A complete changelog for the release notes please check at <a href=https://github.com/tkestack/tke/blob/master/CHANGELOG/CHANGELOG-1.3.md>changelog</a></p><h3 id=major-feature-and-enhancements>Major Feature and Enhancements</h3><p>用户权限</p><ul><li>增加预设平台策略：平台管理员、平台用户、平台租户，允许用户在新建或更新时绑定不同的平台策略权限，更支持为用户自定义独立的权限，方便管理平台视图下集群，业务，扩展组件及运维中心等功能。</li><li>增加预设业务策略：业务管理员、业务成员、只读成员，同时支持配置自定义业务权限，允许用户为不同业务绑定不同的业务权限，方便用户在业务视图下实现更细粒度的权限控制。</li></ul><p>业务管理</p><ul><li>增强业务管理功能，支持用户在业务管理视图下查看自身业务详情，包括资源配额、成员列表、子业务及命名空间，具有业务管理员权限的用户可以管理自身业务的成员、子业务和命名空间。</li><li>平台管理员负责管理各个业务的配额，支持根据不同集群设置不同配额。支持子业务的解除和导入，支持命名空间在不同业务下迁移。</li><li>支持生成业务下命名空间访问凭证，获得访问凭证(kubeconfig) 的用户有权限访问和操作(kubectl) 指定命名空间下的资源.</li></ul><p>日志</p><ul><li>新建工作负载时支持配置日志目录，指定日志输出的数据卷和挂载点。在pod详情页中的日志面板下，支持查看文件日志的内容。</li><li>平台管理视图下增加了日志组件设置页面，同时在集群基本信息页面也增加日志组件按钮，用以控制开启或关闭集群的日志采集功能。</li><li>业务管理视图下增加日志采集页面，支持命名空间下的工作负载、容器等配置日志采集规则。</li><li>对 logcollector 组件进行降级处理，已安装 log-collector 组件的可以删除，未安装 log-collector 组件的将无法新增安装，前台代码还对各处的 logAgent 和 logCollector 做了兼容处理</li></ul><p>审计</p><ul><li>新增审计功能，记录并保存用户操作记录，包括时间、操作人、操作类、集群、命名空间、资源类型、操作对象及操作结果，并有独立的页面方便管理员集中查看审计记录。</li></ul><p>监控告警</p><ul><li>升级后台 prometheus 至 v2.16.0，增加对 prometheus 的资源配额限制</li><li>优化业务指标页面数据，优化工作负载监控页面展示</li><li>创建告警支持选择某一个 ns 下所有 pod/ 某一个 ns 下某一类工作负载的 pod。新增对 tapp 类型的告警和监控支持。</li><li>新增历史告警记录功能，记录保存平台下所有触发的告警记录.</li><li>新增 webhook 告警渠道，增加通知模板说明指引，累计已支持邮件、短信、微信公众号及 webhook 通知渠道。</li></ul><p>其他</p><ul><li>新建工作负载页面支持配置 pod annotatoion，支持配置多行容器运行命令，支持 field 环境变量引用类型，支持权限集配置，支持滚动列表展示指定节点调度。</li><li>新增导入集群检查机制，对已导入的集群或版本不符合要求的集群禁止导入。</li><li>登录 pod 支持多种命令行。</li><li>tke-installer 增加对 logagent，audit 等组件的安装配置管理。</li><li>优化 tke 组件的资源配额</li><li>支持对接外部 etcd</li></ul><h3 id=bugs-fixed>Bugs Fixed</h3><p>自 v1.2.5 以来修复的主要问题</p><ul><li>修复由k8s升级导致的 Deployment 无法在控制台里回滚</li><li>业务管理控制台 pod 销毁重建操作前台发起的api中namespace参数不对</li><li>业务管理控制台 helm 应用展示没有区分ns</li><li>namespace detail page is always loading</li><li>私有镜像仓库设置 Secret，密码长度输入限制</li><li>Chart 包地址和镜像路径显示不全，且没有复制的按钮</li><li>业务管理控制台无法新建通知模板</li><li>扩展组件新建异常或一直检查</li><li>Namespace 状态无法自动恢复</li><li>安装 VolumeDecorator失败</li><li>Master 支持通过keepalive + iptables 实现负载均衡</li><li>Create ClusterCredential before create Cluster</li><li>Delete Imported cluster hang in Terminating</li><li>Docker startup err not detected</li><li>节点列表搜索一个 nodename，点开后的 yaml 显示的并不是该节点的 yaml</li><li>创建应用时环境变量支持小数点</li><li>告警策略创建时，pod ready 的默认值调整为 false，包括平台管理和业务管理</li><li>Webshell 使用 vim 时卡住</li><li>QR code into wechat group is not valid any more</li></ul><h3 id=versions>Versions</h3><h4 id=离线安装包地址>离线安装包地址</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-linux-amd64-v1.3.0.run
</code></pre></div><p>arm64版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-linux-arm64-v1.3.0.run
</code></pre></div><p>Kubernetes 版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>kube-apiserver-amd64:v1.16.9
kube-apiserver-amd64:v1.18.3
kube-apiserver-arm64:v1.16.9
kube-apiserver-arm64:v1.18.3
kube-controller-manager-amd64:v1.16.9
kube-controller-manager-amd64:v1.18.3
kube-controller-manager-arm64:v1.16.9
kube-controller-manager-arm64:v1.18.3
kube-proxy-amd64:v1.16.9
kube-proxy-amd64:v1.18.3
kube-proxy-arm64:v1.16.9
kube-proxy-arm64:v1.18.3
kube-scheduler-amd64:v1.16.9
kube-scheduler-amd64:v1.18.3
kube-scheduler-arm64:v1.16.9
kube-scheduler-arm64:v1.18.3
</code></pre></div><p>镜像版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>tkestack/tke-auth-api-amd64:v1.3.0
tkestack/tke-auth-api-arm64:v1.3.0
tkestack/tke-auth-controller-amd64:v1.3.0
tkestack/tke-auth-controller-arm64:v1.3.0
tkestack/tke-business-api-amd64:v1.3.0
tkestack/tke-business-api-arm64:v1.3.0
tkestack/tke-business-controller-amd64:v1.3.0
tkestack/tke-business-controller-arm64:v1.3.0
tkestack/tke-gateway-amd64:v1.3.0
tkestack/tke-gateway-arm64:v1.3.0
tkestack/tke-logagent-api-amd64:v1.3.0
tkestack/tke-logagent-api-arm64:v1.3.0
tkestack/tke-logagent-controller-amd64:v1.3.0
tkestack/tke-logagent-controller-arm64:v1.3.0
tkestack/tke-monitor-api-amd64:v1.3.0
tkestack/tke-monitor-api-arm64:v1.3.0
tkestack/tke-monitor-controller-amd64:v1.3.0
tkestack/tke-monitor-controller-arm64:v1.3.0
tkestack/tke-notify-api-amd64:v1.3.0
tkestack/tke-notify-api-arm64:v1.3.0
tkestack/tke-notify-controller-amd64:v1.3.0
tkestack/tke-notify-controller-arm64:v1.3.0
tkestack/tke-platform-api-amd64:v1.3.0
tkestack/tke-platform-api-arm64:v1.3.0
tkestack/tke-platform-controller-amd64:v1.3.0
tkestack/tke-platform-controller-arm64:v1.3.0
tkestack/tke-registry-api-amd64:v1.3.0
tkestack/tke-registry-api-arm64:v1.3.0
</code></pre></div><p>其他addon镜像版本</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>alertmanager:v0.18.0
busybox-amd64:1.31.0
busybox-amd64:1.31.1
busybox-arm64:1.31.0
busybox-arm64:1.31.1
configmap-reload:v0.1
coredns-amd64:1.6.7
coredns-arm64:1.6.7
cron-hpa-controller:v1.0.0
csi-operator:v1.0.2
etcd-amd64:v3.4.7
etcd-arm64:v3.4.7
flannel-amd64:v0.10.0
flannel-arm64:v0.10.0
galaxy-amd64:v1.0.4
galaxy-arm64:v1.0.4
galaxy-ipam-amd64:v1.0.4
galaxy-ipam-arm64:v1.0.4
gpu-manager:v1.0.4
gpu-quota-admission:v1.0.0
helm-api:v1.3
influxdb-amd64:1.7.9
influxdb-arm64:1.7.9
keepalived-amd64:2.0.16-r0
keepalived-arm64:2.0.16-r0
kube-state-metrics:v1.9.5
lbcf-controller:v1.0.0.rc.2
log-agent:v1.1.0
log-collector:v1.1.0
log-file:v1.1.0
node-exporter:v0.18.1
nvidia-device-plugin:1.0.0-beta4
pause-amd64:3.1
pause-arm64:3.1
prometheus-config-reloader:v0.31.1
prometheus-operator:v0.31.1
prometheus:v2.16.0
prometheusbeat:6.4.1
provider-res-amd64:v1.18.3-1
provider-res-arm64:v1.18.3-1
registry-amd64:2.7.1
registry-arm64:2.7.1
swift:0.9.0
tapp-controller:v1.0.0
tiller:v2.10.0
volume-decorator:v1.0.1
</code></pre></div><h3 id=known-issues>Known Issues</h3><h3 id=upgrades-notes>Upgrades Notes</h3><p>暂不支持自动升级，需要人工升级操作，升级过程保证configmap，workload 配置以及组件镜像的同时升级。</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/tkestack/tke aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 The TKEStack Authors All Rights Reserved</small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/web/js/main.min.1911ee3ae98d7d6df3807cd00d8e31ae7d1c08ee0f0bb587529b0483da4e5464.js integrity="sha256-GRHuOumNfW3zgHzQDY4xrn0cCO4PC7WHUpsEg9pOVGQ=" crossorigin=anonymous></script></body></html>